<!doctype html>
<html lang="zh">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" href="./static/css/login/default.css">
    <link rel="stylesheet" type="text/css" href="./static/css/login/styles.css">
</head>

<body>
    <article class="htmleaf-container">
        <div class="panel-lite">
            <div class="thumbur">
                <div class="icon-lock"></div>
            </div>
            <h4>用户登录</h4>
            <div class="form-group">
                <input id="nps_url" required="required" class="form-control" />
                <label class="form-label">nps登录地址(需要带http) </label>
            </div>
            <div class="form-group">
                <input id="username" required="required" class="form-control" />
                <label class="form-label">用户名 </label>
            </div>
            <div class="form-group">
                <input id="password" type="password" required="required" class="form-control" />
                <label class="form-label">密　码</label>
            </div>
            <a href="#">忘记密码 ? </a>
            <!-- <button class="floating-btn"><i class="icon-arrow"></i></button> -->
            <button class="floating-btn">登录</button>
        </div>
    </article>

    <script src="./static/js/zepto.min.js"></script>
    <script src="./static/js/get_client_info.js"></script>
    <script>
        const axios = require('axios')
        const qs = require('qs')
        const Store = require('electron-store');
        const store = new Store();
        const ipc = require('electron').ipcRenderer;






        $('.floating-btn').on('click', event => {
            var username = $('#username').val();
            var password = $('#password').val();
            var nps_url = $('#nps_url').val();
            var dd = {
                url: 'http://60.10.227.41:8899',
                username: 'admin',
                password: '123'
            }
            // var dd = {
            //     url: nps_url,
            //     username: username,
            //     password: password
            // }
            var login_result = ipc.sendSync('login', dd)
            if (login_result == 'login_success') {
                window.location.href = './index.html'
            } else {

            }
        })
//         document.querySelector('.floating-btn').onclick = function () {

//             var username = $('#username').val();
//             var password = $('#password').val();
//             var nps_url = $('#nps_url').val();
//             var dd={
//                 url:nps_url,
//                 username:username,
//                 password:password
//             }
//             var login_result=ipc.sendSync('login',dd)
//             if(login_result=='login_success'){
//                 window.location.href = './index.html'
//             }else{

//             }

// //             axios({
// //                 method: 'post',
// //                 // url: 'http://127.0.0.1:8088/client/login',
// //                 url: `${nps_url}/login/verify`,
// //                 headers:{

// // },
// //                 data: qs.stringify({
// //                     username: username,
// //                     password: password
// //                 }) 
// //             }).then(res => {
// //                 console.log(res.headers['set-cookie'])
// //                 console.log(res.data)
// //                 if (res.data.status == 1 && res.data.msg == 'login success') {
// //                     console.log('login success')
// //                     var get_cookie=(((res.headers['set-cookie'])[0]).split(';'))[0]
// //                     console.log('cookie',get_cookie)
// //                     var sss=ipc.sendSync('set_cookie',get_cookie)
// //                     console.log('ipc',sss)
// //                     if(sss=='ok'){
// //                         window.location.href = './index.html'
// //                     }                   
// //                 }
// //             }).catch(err => {

// //             })
//         }
    </script>
</body>

</html>